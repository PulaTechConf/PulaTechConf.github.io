<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Index Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="card shadow">
            <div class="card-body">
                <h1 class="mb-4">Creating Firebase Indexes</h1>
                
                <div class="alert alert-info">
                    <p>If you're seeing errors about missing indexes, you need to create them in your Firebase console.</p>
                </div>
                
                <h2 class="h4 mt-4">Option 1: Click the Error Link</h2>
                <p>The simplest way to create the required index is to click the URL in the error message. It looks like:</p>
                <div class="bg-dark text-light p-3 rounded">
                    <code>
                        https://console.firebase.google.com/v1/r/project/pulatechcon/firestore/indexes?create_composite=...
                    </code>
                </div>
                <p class="mt-3">This link will take you directly to the Firebase console where you can create the index with a single click.</p>
                
                <h2 class="h4 mt-4">Option 2: Manual Creation</h2>
                <ol>
                    <li>Go to <a href="https://console.firebase.google.com/project/pulatechcon/firestore/indexes" target="_blank">Firebase Console → Firestore → Indexes</a></li>
                    <li>Click "Add Index"</li>
                    <li>Select the correct collection (e.g., "all_messages")</li>
                    <li>Add the following fields:
                        <ul>
                            <li>"channel" - Ascending</li>
                            <li>"timestamp" - Ascending</li>
                        </ul>
                    </li>
                    <li>Click "Create"</li>
                </ol>
                
                <div class="alert alert-warning mt-4">
                    <p><strong>Note:</strong> It can take a few minutes for new indexes to be created and become active. Once the index is created, the error will disappear when you reload the page.</p>
                </div>
                
                <h2 class="h4 mt-4">Option 3: Fixed Query</h2>
                <p>We've updated the code to use a simplified query structure that doesn't require custom indexes. This should resolve the issues immediately without needing to create indexes.</p>
            </div>
        </div>
    </div>
</body>
</html>
